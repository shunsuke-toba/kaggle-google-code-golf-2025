p=lambda g:(r:=range(n:=len(g)),[[3*(~(d:=min(x,y,n+~x,n+~y))&1^((y==x+1)&(x+(n&3==2)<n//2)))for x in r]for y in r])[1]