# Task 119: 斜め移動と反射による経路描画

## 問題の考察ポイントと解き方

### 考察ポイント

1. **開始点の特定**: 赤（2）と黒（0）以外の色のセル（主に水色 8）が開始点となる
2. **進行方向の決定**: 各開始点から 4 つの斜め方向を試し、隣接セルに同じ色がある方向が進行方向となる
3. **反射の判定**: 赤（2）の壁に当たった際、壁の向きを判定して適切に反射する必要がある
   - 縦の壁（上下に赤が連続）: 水平方向（dx）を反転
   - 横の壁（左右に赤が連続）: 垂直方向（dy）を反転
4. **反射のタイミング**: 赤のマスに「進む前に」チェックして反射することが重要

### 解くための手続き

1. グリッド全体を走査し、赤（2）と黒（0）以外のセルを探す
2. 見つけた各セルについて、4 つの斜め方向（(-1,-1), (-1,1), (1,-1), (1,1)）を確認
3. 隣接セルが同じ色の場合、その方向に進行を開始
4. 進行中の処理：
   - 次のセルが範囲外なら終了
   - 次のセルが赤（2）なら：
     - 赤の上下左右を確認して壁の向きを判定
     - 縦の壁なら水平方向を反転、横の壁なら垂直方向を反転
     - 反射後、新しい方向で進行を継続
   - 次のセルが黒（0）なら：緑（3）に塗り替えて進む
   - 次のセルが同じ色または緑（3）なら：そのまま進む
   - それ以外なら：終了
5. 全ての開始点と方向について処理を完了したら、変更後のグリッドを返す
