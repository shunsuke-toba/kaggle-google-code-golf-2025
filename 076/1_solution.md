# Task 076: 4 色ブロックのパターンマッチング

## 問題の考察ポイントと解き方

### 考察ポイント

- グリッド内には黄色(4)、赤(2)、緑(3)、青(1)の 4 色で構成される連結ブロックが存在する
- この 4 色ブロックは 8 方向（斜めを含む）で連結している領域として定義される
- 同じ 4 色ブロックのパターンが異なる位置に回転・反転した形で配置されている
- 赤(2)と黄色(4)がすべて一致する場所で、黒色(0)の部分に他の色（緑と青）を塗りつぶす必要がある
- テンプレートブロックは連結成分として抽出し、その境界矩形を使用する

### 解くための手続き

1. **DFS による 8 方向連結成分の検出**

   - 非ゼロセルから開始して、上下左右＋斜め 4 方向の隣接セルを探索
   - 各連結成分を記録

2. **4 色テンプレートブロックの特定**

   - 各連結成分から色を収集
   - {1,2,3,4}の 4 色すべてを含む最初の連結成分を見つける
   - その連結成分の境界矩形（最小包含矩形）をテンプレートとして抽出

3. **8 つの変換パターンの生成**

   - 元のテンプレート
   - 90°、180°、270° 回転（numpy.rot90 使用）
   - 水平反転版（numpy.fliplr 使用）
   - 反転版の 90°、180°、270° 回転

4. **パターンマッチングと適用**

   - グリッド内の各位置で各変換パターンを試す
   - 赤(2)と黄色(4)がすべて一致するかチェック
   - 完全一致する場合、黒色(0)の部分にテンプレートの対応する色を配置

5. **結果の返却**
   - numpy.where を使用して効率的に条件付き置換を実行
   - 変更されたグリッドをリストとして返す
