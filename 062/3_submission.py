def p(g):r=range(s:=10);f=sum(g,[]);k=sum({*f})-2;i=f.index(2);a=(i//s,i%s)[b:=k in g[i//s]]+f[i+s-9*b]//k;return[[(3,k)[g[y][x]|g[(2*a+~y,y)[b]%s][(x,2*a+~x)[b]%s]>0]for x in r]for y in r]