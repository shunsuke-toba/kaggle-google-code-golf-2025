def p(g):r=range(len(g));return[[(s:=sorted(((u:=abs(y-i))+(w:=abs(x-j)),~max(u,w)%2*v)for i in r for j in r if(v:=g[i][j])))[0][1]*(s[0]<s[1][:1])for x in r]for y in r]