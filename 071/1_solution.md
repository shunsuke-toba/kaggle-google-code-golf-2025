# Task 071: マスクされた y 軸対称パターンの復元

# 問題の考察ポイントと解き方

## 考察ポイント

1. **グリッド内の 2 種類のブロック**

   - 矩形ブロック: 完全に塗りつぶされた長方形（単一色）
   - パターンブロック: y 軸対称の図形（一部が矩形でマスクされている）

2. **矩形の判定条件**

   - ある色の全セルが矩形の境界内に収まる
   - 境界内の全セルがその色で塗られている
   - 欠けや飛び地がない連続した矩形

3. **y 軸対称性の性質**

   - パターンは本来完全に y 軸対称
   - 矩形によって一部が隠されているだけ
   - 矩形の外側の行から正しい対称軸を推定可能

4. **復元の原理**
   - 見えている部分から対称軸を特定
   - 対称軸を基準に欠けている部分を鏡像で補完
   - 矩形自体は出力から除外

## 解くための手続き

1. **色の抽出と分類**

   - グリッドから 0 以外の全色を抽出
   - 各色について座標リストを作成

2. **矩形チェック**

   - 各色の最小・最大座標から境界ボックスを計算
   - 境界ボックス内が全て同じ色か確認
   - 矩形条件を満たす色とそうでない色を分離

3. **対称軸の特定**

   - 矩形の影響を受けない行（矩形の上下の行）を探索
   - その行でのパターンの左端と右端を検出
   - 中心座標を計算（これが対称軸）

4. **パターンの復元**

   - 出力グリッドにパターン色のセルのみをコピー
   - 各パターンセルについて対称位置を計算
   - 対称位置にも同じ色を配置

5. **結果の返却**
   - 矩形を除外し、y 軸対称性が復元されたパターンのみを返す
