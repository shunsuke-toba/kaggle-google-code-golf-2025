def p(g):
 for r in g[1:-2]:
  j=1
  for c in r[2:-2]:
   for b in-1,0:r[b^1]+=c*(c==r[b]);r[j:=j-b]=0;g[b^1][j]+=c*(c==g[b][j])
 return g