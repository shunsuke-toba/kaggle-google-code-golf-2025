def p(g):
 for _ in range(20):m=len(g[0]);a=[[0]*m]*2+g;b=[[0]*m]+g;g=[*map(list,zip(*[[c|4*(p==4or[u,v,p,q]==[0,0,5,5])for c,(u,v,p,q)in zip(r,zip([0,*a[i]],[0,0,*b[i]],b[i],[0,*r]))]for i,r in enumerate(g)][::-1]))]
 return g