# Task 366: パターンコピーと背景領域の切り出し

## 問題文

0〜9 の整数からなる H×W グリッド `g` が与えられます。グリッドには複数の色が存在し、そのうち最も多く現れる色を **コピー先の背景色**、次に多く現れる色を **コピー元の背景色**、3 番目に多く現れる色を **パターン背景色** とします。

コピー元の背景色の領域を外接する最小の長方形を考え、その領域内でパターン背景色を含む連結成分を探索します（4 近傍）。各連結成分はパターン背景色とその他の色から構成されます。

得られた各連結成分を「パターン」とみなし、コピー先の背景色の領域内で以下を満たす配置を探します。

- パターンを回転・反転した 8 通りの姿を考える。
- パターン内でパターン背景色でないセルの色が、配置先のグリッドで完全に一致する。
- パターン背景色のセルは、配置先ではコピー先の背景色である。

条件を満たす位置が存在する場合、その位置にパターンをコピーします（パターン背景色も含めて上書き）。複数の連結成分がある場合は、パターン背景色でないセル数が多いものから順に処理します。適合する位置が存在しなければそのパターンは無視します。

最終的に、コピー先の背景色の領域を外接する最小の長方形で切り抜いたグリッドを出力してください。

## 入力

- `g`: H×W の 2 次元配列。各要素は 0〜9 の整数。

## 出力

- 変換後の 2 次元配列。