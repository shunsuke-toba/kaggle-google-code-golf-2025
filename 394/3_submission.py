def p(g):w=len(g);r=range;z=[(i,j)for i in r(w)for j in r(w)if g[i][j]<1];a,b=z[0];c,d=z[-1];s=2+(w>6);t={(i%s,j%s):g[i][j]for i in r(w)for j in r(w)if g[i][j]};return[[t[i%s,j%s]for j in r(b,d+1)]for i in r(a,c+1)]