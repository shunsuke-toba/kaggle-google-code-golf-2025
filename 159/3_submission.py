def p(g):e=enumerate;k=sum(2in r for r in g);t=[2]*k;a,b=map(min,zip(*{(i,j)for i,r in e(g)for j,v in e(r)if-3&v}));k//=3;r=range(3*k);return t,*[[2,*[g[a+i//k][b+j//k]for j in r],2]for i in r],t