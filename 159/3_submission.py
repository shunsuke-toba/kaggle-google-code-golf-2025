def p(g):k=sum(2in r for r in g);t=[2]*k;f=lambda g:[c for c in zip(*g)if-3&max(c)];k//=3;return t,*[[2,*sum(zip(*([r]*k)),()),2]for r in f(f(g))for _ in[0]*k],t