def p(g):k=sum(2in r for r in g);t=[2]*k;k//=3;return t,*([2,*sum(zip(*[r]*k),()),2]for r in zip(*(c for c in zip(*g)if-3&max(c)))if-3&max(r)for _ in[0]*k),t