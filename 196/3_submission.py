def p(g):e=enumerate;g=eval("[*zip(*[[c*((2^c)+i*r[i-1]>0)for i,c in enumerate(r)]for r in "*64+str(g).replace('0','2')+"[::-1]])]"*64);return[[v%2*(v+2*any(2in R[:j+2][-3:]for R in g[:i+2][-3:]))for j,v in e(r)]for i,r in e(g)]