p=lambda g:[[max(r[:j+1])&max(r[j:])|max(c[:i+1])&max(c[i:])for j,c in enumerate(zip(*g))]for i,r in enumerate(g)]