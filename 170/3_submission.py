p=lambda g:(r:=range,E:=enumerate,m:=min,M:=max,f:=sum(g,[]),R:=M(i for i,R in E(g)if any(R)),C:=[j for j,v in E(g[R])if v],n:=len(C),a:=R-n+1,c:=C[0],d:=M(r(1,10),key=f.count),S:=[(i,j)for i,R in E(g)for j,v in E(R)if v==d and not(a<=i<a+n and c<=j<c+n)],h:=m(i for i,_ in S),s:=(M(i for i,_ in S)-h+1)//n,k:=m(j for _,j in S),[[g[a+i][c+j]*(g[h+i*s][k+j*s]==d)for j in r(n)]for i in r(n)])[-1]
