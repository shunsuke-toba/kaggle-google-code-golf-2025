p=lambda g:(s:=sum(g,[]),c:=next(x for x in s if s.count(x)==4),e:=enumerate)and[[((g[i][0]==g[i][-1]==c)|(g[0][j]==g[-1][j]==c))*c for j,x in e(r)]for i,r in e(g)]