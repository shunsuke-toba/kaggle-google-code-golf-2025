# Task 079: 最頻出 3x3 パターンの抽出

# 問題の考察ポイントと解き方

## 考察ポイント

- 入力グリッドから全ての 3x3 パターンを抽出して頻度を数える
- 3x3 パターンとして有効なものは、黒色(0)以外の色が 4 つ以上含まれているもの
- **重要**: 同じ色で複数のパターンが登録されている場合、その色が最も多く含まれているパターンだけが候補となる
  - 例：色 4 を 4 個含むパターンと色 4 を 5 個含むパターンがある場合、5 個含むパターンのみが候補
- フィルタリング後、最も頻度が高いパターンを出力として返す
- 頻度が同じパターンが複数ある場合は、黒色(0)のセルが最も少ないものを選択
- 出力は常に 3x3 のグリッドになる

## 解くための手続き

1. **3x3 パターンの抽出**

   - 入力グリッドの全ての位置で 3x3 のウィンドウをスライド
   - 各 3x3 ブロックを取得

2. **有効パターンのフィルタリング**

   - 各 3x3 パターンについて、黒色(0)以外のセル数をカウント
   - 4 個以上の非黒色セルを含むパターンのみを対象とする

3. **パターンの分析**

   - 各パターンについて、最も多く含まれる色（支配的な色）を特定
   - その色の出現数をカウント
   - 黒色セル数も記録

4. **色ごとのフィルタリング**

   - パターンを支配的な色でグループ化
   - 各色グループ内で、その色を最も多く含むパターンのみを候補として残す
   - 他のパターンは候補から除外

5. **最適パターンの選択**

   - フィルタリング後の候補から選択
   - 第 1 優先：出現頻度が最も高いパターン
   - 第 2 優先：頻度が同じ場合は黒色セルが最も少ないパターン

6. **結果の返却**
   - 選択された 3x3 パターンを出力グリッドとして返す
