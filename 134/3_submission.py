def p(g,f=filter):
 for b in{*sum(g,[])}:
  if len({*(h:=[*zip(*f(any,zip(*f(any,[[d*(d!=b)for d in r]for r in g]))))])})<4:k=len(h)//3;return[[b*(c>0)for c in r[::k]]for r in h[::k]]