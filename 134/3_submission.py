def p(g,f=filter):
 for b in sum(g,[]):
  if len({*(h:=[*zip(*f(any,zip(*f(any,[[0<d!=b for d in r]for r in g]))))])})<4:k=len(h)//3;return[[c*b for c in r[::k]]for r in h[::k]]