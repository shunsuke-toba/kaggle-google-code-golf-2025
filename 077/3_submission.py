p=lambda g,n=24:n and p([*zip(*map(lambda a,r:map(lambda c,l,n,u:(c,4)[c-2and 20>>l&(20>>n|20>>u)&1],r,[0,*r],[*r[1:],0],a),g[:1]+g,g))][::-1],n-1)or g