# Task 077: 赤色連結成分の矩形塗りつぶし

# 問題の考察ポイントと解き方

## 考察ポイント

- グリッド内に赤色（2）のブロックが散在している
- 赤色のブロック同士はチェビシェフ距離が 2 以下の場合に連結していると判定
  - チェビシェフ距離: max(|dx|, |dy|) ≤ 2
  - 通常の 8 近傍よりも広い範囲で連結判定を行う
- 各連結成分に対して、その境界矩形（最小包含矩形）を計算
- 境界矩形内のセルを塗りつぶす際のルール：
  - 赤色（2）のセルはそのまま赤色を維持
  - それ以外のセルは黄色（4）に変更
- Union-Find（素集合データ構造）を使用することで効率的に連結成分を管理可能

## 解くための手続き

1. **赤色セルの検出**

   - グリッド全体をスキャンして赤色（2）のセルの位置を記録
   - 座標のリストとして管理

2. **連結成分の形成（チェビシェフ距離 ≤2）**

   - Union-Find データ構造を初期化（各赤色セルが独立した集合）
   - すべての赤色セルのペアについてチェビシェフ距離を計算
   - 距離が 2 以下のペアを Union 操作で同じ集合に統合
   - 経路圧縮を使用して効率化

3. **各連結成分の境界矩形を計算**

   - Find 操作で各セルの代表元を取得
   - 同じ代表元を持つセルをグループ化
   - 各グループについて最小/最大座標を計算

4. **境界矩形内の塗りつぶし**

   - 各連結成分の境界矩形範囲を走査
   - 赤色（2）以外のセルを黄色（4）に変更
   - 赤色セルは変更しない

5. **結果の返却**
   - 変更されたグリッドを返す
