def p(g,R=range(10)):v=max(sum(g,[]));F=lambda r,c,t,m,b=0:[[v*((d:=max(abs(2*i-2*r-t+1),abs(2*j-2*c-t+1)))%(u:=t+1)<1 and d//u&1 and d<m*2*u+u)or b for j in R]for i in R];return next(F(*p,t,10,5)for k in R for p in((k,0),(0,k))for t in(1,2)for m in(2,3)if F(*p,t,m)==g)
