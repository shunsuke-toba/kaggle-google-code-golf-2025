# Task 069: テンプレートパターンの適用

# 問題の考察ポイントと解き方

## 考察ポイント

1. **ブロックの識別**

   - グリッド内の連結成分（4 方向連結）を検出
   - 各ブロックは同じ形状とサイズを持つ
   - 0 以外の値を持つセルが連結されてブロックを形成

2. **ブロックの分類**

   - 複数色ブロック: 2 色以上を含む → テンプレート
   - 単色ブロック: 1 色のみ（通常は 8） → 変換対象
   - テンプレートは 1 つだけ存在

3. **変換ルール**
   - テンプレートの色配置パターンを抽出
   - 各単色ブロックをテンプレートの色配置で置き換え
   - テンプレート自体は出力から削除

## 解くための手続き

1. **連結成分の検出**

   - DFS を使用して全ての連結成分を探索
   - 各成分の座標リストと含まれる色の集合を記録

2. **テンプレートと変換対象の分離**

   - 色の種類数が 2 以上の成分 → テンプレート
   - 色の種類数が 1 の成分 → 変換対象リスト

3. **テンプレートパターンの抽出**

   - テンプレートのバウンディングボックスを計算
   - 各セルの相対位置（左上基準）と色のマッピングを作成

4. **パターンの適用**

   - 出力グリッドを 0 で初期化
   - 各単色ブロックの左上座標を基準に
   - テンプレートの相対位置と色を適用

5. **結果の返却**
   - 変換された全ブロックを含む新しいグリッドを返す
